<!doctype html><html lang=zh-cn><head><title>Golang å®ä½“å‚æ•°æ ¡éªŒ</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/application.d76ae64b4d864d8b012ffca37ced7382b2f3f979e35d29ca1f11d14384e64712.css integrity="sha256-12rmS02GTYsBL/yjfO1zgrLz+XnjXSnKHxHRQ4TmRxI="><link rel=icon type=image/png href=/images/favicon_hu8376fd15465fef26ffe66b6bcf0ca686_13669_42x0_resize_box_3.png><meta property="og:title" content="Golang å®ä½“å‚æ•°æ ¡éªŒ"><meta property="og:description" content="#golang #reflect
Aï¼š&ldquo;è¯·ç”¨ä¸€å¥è¯è®©åˆ«äººçŸ¥é“ä½ å†™è¿‡Golangã€‚&rdquo;
Bï¼š&ldquo;if err!= nil &mldr;&rdquo;
èµ·å›  åªè¦æ˜¯æ¥è§¦è¿‡Golangçš„äººï¼Œæ— ä¸ä¸ºå…¶if err != nilçš„è¯­æ³•æ„Ÿåˆ°æƒŠå¥‡ï¼Œæˆ–æ˜¯å¤§åŠ èµèµï¼Œæˆ–æ˜¯ç‹ ç‹ ç—›æ‰¹ã€‚ä½œä¸ºä½¿ç”¨è€…ï¼Œä¸ç®¡å–œæ¬¢ä¹Ÿå¥½ï¼Œåå¯¹ä¹Ÿç½¢ï¼Œ ç›®å‰è¿˜æ˜¯è¦æ¥å—è¿™ç§é”™è¯¯å¤„ç†æ¨¡å¼ã€‚
è€Œæœ€ä»¤äººå¤´ç—›çš„å°±æ˜¯è¯·æ±‚å‚æ•°ä¸­å„ç§å€¼çš„æ ¡éªŒã€‚æ¯”å¦‚Getè¯·æ±‚ä¸­æ¥æ”¶åˆ†é¡µå‚æ•°æ—¶ï¼Œéœ€è¦å°†stringæ ¼å¼çš„å‚æ•°è½¬æ¢æˆintç±»å‹ï¼Œå†å¦‚æ—¶é—´ç±»å‹çš„å‚æ•° è½¬æ¢ï¼Œ è¯¸å¦‚æ­¤ç±»ï¼Œç­‰ç­‰ç­‰ç­‰ã€‚å¥½å®¶ä¼™ï¼Œä¸€ä¸ªæ¥å£å†™å®Œif err != nilçš„åˆ¤æ–­å äº†ä¸€å¤šåŠçš„è¡Œæ•°ï¼Œçœ‹ç€å®åœ¨ä¸çˆ½ã€‚
ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œè€Œä¸”è¿™ä¸ªæ¥å£å‚æ•°è¿˜ä¸æ˜¯ç‰¹åˆ«å¤š
func Export(c *gin.Context) { //åˆ é™¤å¼€å¤´ //... var param map[string]string err := c.ShouldBindJSON(&amp;param) if err != nil { ErrRsponse(c,errCode) return } var vId, userId, userName, format string if v, ok := param[&#34;vId&#34;]; ok { vId = v } else { ErrRsponse(c,errCode) return } if len(vId) == 0 { ErrRsponse(c,errCode) return } if v, ok := param[&#34;userId&#34;]; ok { userId = v } else { ErrRsponse(c,errCode) return } if v, ok := param[&#34;userName&#34;]; ok { userName = v } else { ErrRsponse(c,errCode) return } if v, ok := param[&#34;format&#34;]; ok { format = v } else { ErrRsponse(c,errCode) return } if !"><meta property="og:type" content="article"><meta property="og:url" content="https://ormissia.github.io/posts/knowledge/2001-go/002-param-verify/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-27T15:08:44+08:00"><meta property="article:modified_time" content="2021-07-27T15:08:44+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang å®ä½“å‚æ•°æ ¡éªŒ"><meta name=twitter:description content="#golang #reflect
Aï¼š&ldquo;è¯·ç”¨ä¸€å¥è¯è®©åˆ«äººçŸ¥é“ä½ å†™è¿‡Golangã€‚&rdquo;
Bï¼š&ldquo;if err!= nil &mldr;&rdquo;
èµ·å›  åªè¦æ˜¯æ¥è§¦è¿‡Golangçš„äººï¼Œæ— ä¸ä¸ºå…¶if err != nilçš„è¯­æ³•æ„Ÿåˆ°æƒŠå¥‡ï¼Œæˆ–æ˜¯å¤§åŠ èµèµï¼Œæˆ–æ˜¯ç‹ ç‹ ç—›æ‰¹ã€‚ä½œä¸ºä½¿ç”¨è€…ï¼Œä¸ç®¡å–œæ¬¢ä¹Ÿå¥½ï¼Œåå¯¹ä¹Ÿç½¢ï¼Œ ç›®å‰è¿˜æ˜¯è¦æ¥å—è¿™ç§é”™è¯¯å¤„ç†æ¨¡å¼ã€‚
è€Œæœ€ä»¤äººå¤´ç—›çš„å°±æ˜¯è¯·æ±‚å‚æ•°ä¸­å„ç§å€¼çš„æ ¡éªŒã€‚æ¯”å¦‚Getè¯·æ±‚ä¸­æ¥æ”¶åˆ†é¡µå‚æ•°æ—¶ï¼Œéœ€è¦å°†stringæ ¼å¼çš„å‚æ•°è½¬æ¢æˆintç±»å‹ï¼Œå†å¦‚æ—¶é—´ç±»å‹çš„å‚æ•° è½¬æ¢ï¼Œ è¯¸å¦‚æ­¤ç±»ï¼Œç­‰ç­‰ç­‰ç­‰ã€‚å¥½å®¶ä¼™ï¼Œä¸€ä¸ªæ¥å£å†™å®Œif err != nilçš„åˆ¤æ–­å äº†ä¸€å¤šåŠçš„è¡Œæ•°ï¼Œçœ‹ç€å®åœ¨ä¸çˆ½ã€‚
ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œè€Œä¸”è¿™ä¸ªæ¥å£å‚æ•°è¿˜ä¸æ˜¯ç‰¹åˆ«å¤š
func Export(c *gin.Context) { //åˆ é™¤å¼€å¤´ //... var param map[string]string err := c.ShouldBindJSON(&amp;param) if err != nil { ErrRsponse(c,errCode) return } var vId, userId, userName, format string if v, ok := param[&#34;vId&#34;]; ok { vId = v } else { ErrRsponse(c,errCode) return } if len(vId) == 0 { ErrRsponse(c,errCode) return } if v, ok := param[&#34;userId&#34;]; ok { userId = v } else { ErrRsponse(c,errCode) return } if v, ok := param[&#34;userName&#34;]; ok { userName = v } else { ErrRsponse(c,errCode) return } if v, ok := param[&#34;format&#34;]; ok { format = v } else { ErrRsponse(c,errCode) return } if !"><meta name=description content="Golang å®ä½“å‚æ•°æ ¡éªŒ"></head><body class="type-posts kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png alt=Logo>
Ormissia's Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=æœç´¢ data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>åšæ–‡</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/knowledge/>çŸ¥è¯†ç§¯ç´¯</a><ul class=active><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/knowledge/2001-go/>Go</a><ul class=active><li><a href=/posts/knowledge/2001-go/001-partten-1/ title=å‡½æ•°é€‰é¡¹æ¨¡å¼>å‡½æ•°é€‰é¡¹æ¨¡å¼</a></li><li><a class=active href=/posts/knowledge/2001-go/002-param-verify/ title=å®ä½“å‚æ•°æ ¡éªŒ>å®ä½“å‚æ•°æ ¡éªŒ</a></li><li><a href=/posts/knowledge/2001-go/003-reflect/ title=Golangåå°„>Golangåå°„</a></li><li><a href=/posts/knowledge/2001-go/004-pprof/ title=pprof>pprof</a></li><li><a href=/posts/knowledge/2001-go/005-tag/ title="Golang struct tag">Golang struct tag</a></li><li><a href=/posts/knowledge/2001-go/006-atomic/ title=Golangä¸­çš„åŸå­æ“ä½œ>Golangä¸­çš„åŸå­æ“ä½œ</a></li><li><a href=/posts/knowledge/2001-go/007-cacheline/ title=å…¨å±€å˜é‡åŠ é”çš„ä¼˜åŒ–>å…¨å±€å˜é‡åŠ é”çš„ä¼˜åŒ–</a></li></ul></li><li><a href=/posts/knowledge/2002-rust/ title=Rust>Rust</a></li><li><a href=/posts/knowledge/2003-scala/ title=Scala>Scala</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/knowledge/2004-network/>Network</a><ul><li><a href=/posts/knowledge/2004-network/001-oauth/ title="OAuth 2.0æ‰©å±•åè®®PKCE">OAuth 2.0æ‰©å±•åè®®PKCE</a></li><li><a href=/posts/knowledge/2004-network/002-http_statuscode/ title=HTTPç¬”è®°>HTTPç¬”è®°</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/knowledge/2005-operating-system/>Operating System</a><ul><li><a href=/posts/knowledge/2005-operating-system/001-io-network/ title=ç½‘ç»œIOæ¼”è¿›å†ç¨‹>ç½‘ç»œIOæ¼”è¿›å†ç¨‹</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/knowledge/2010-elastic/>Elastic</a><ul><li><a href=/posts/knowledge/2010-elastic/001-elasticstack-es/ title=Elasticsearch>Elasticsearch</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/knowledge/2006-hadoop/>Hadoop</a><ul><li><a href=/posts/knowledge/2006-hadoop/001-env/ title=Hadoopç”Ÿæ€ç»„ä»¶>Hadoopç”Ÿæ€ç»„ä»¶</a></li><li><a href=/posts/knowledge/2006-hadoop/2007-hadoop-hdfs/ title=HDFSåŸºç¡€çŸ¥è¯†>HDFSåŸºç¡€çŸ¥è¯†</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/knowledge/2007-kubernetes/>Kubernetes</a><ul><li><a href=/posts/knowledge/2007-kubernetes/001-link-index/ title=Kubernetesæ–‡æ¡£ç´¢å¼•>Kubernetesæ–‡æ¡£ç´¢å¼•</a></li><li><a href=/posts/knowledge/2007-kubernetes/002-handless-statefullset/ title=k8sä¸­é€šè¿‡Headlessè¿æ¥StatefulSet>k8sä¸­é€šè¿‡Headlessè¿æ¥StatefulSet</a></li></ul></li><li><a href=/posts/knowledge/2008-mysql/ title=Mysql>Mysql</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/knowledge/2009-redis/>Redis</a><ul><li><a href=/posts/knowledge/2009-redis/001-cache/ title=Redisç¼“å­˜ç›¸å…³é—®é¢˜>Redisç¼“å­˜ç›¸å…³é—®é¢˜</a></li></ul></li><li><a href=/posts/knowledge/2012-framework/ title=Framework>Framework</a></li><li><a href=/posts/knowledge/2011-react-note/ title=Reactå­¦ä¹ ç¬”è®°>Reactå­¦ä¹ ç¬”è®°</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/deployment/>ç¯å¢ƒéƒ¨ç½²</a><ul><li><a href=/posts/deployment/3001-blog-cicd/ title=æˆ‘çš„åšå®¢åç«¯Dockeré•œåƒæ‰“åŒ…è‡ªåŠ¨éƒ¨ç½²æµç¨‹>æˆ‘çš„åšå®¢åç«¯Dockeré•œåƒæ‰“åŒ…è‡ªåŠ¨éƒ¨ç½²æµç¨‹</a></li><li><a href=/posts/deployment/3002-linux-nginx/ title=Linuxéƒ¨ç½²Nginxæµç¨‹>Linuxéƒ¨ç½²Nginxæµç¨‹</a></li><li><a href=/posts/deployment/3003-linux-traefik/ title=Traefikéƒ¨ç½²æµç¨‹>Traefikéƒ¨ç½²æµç¨‹</a></li><li><a href=/posts/deployment/3004-linux-grafana/ title=Grafanaéƒ¨ç½²æµç¨‹>Grafanaéƒ¨ç½²æµç¨‹</a></li><li><a href=/posts/deployment/3005-linux-prometheus/ title=Prometheuséƒ¨ç½²æµç¨‹>Prometheuséƒ¨ç½²æµç¨‹</a></li><li><a href=/posts/deployment/3006-linux-elk/ title=ELKéƒ¨ç½²æµç¨‹>ELKéƒ¨ç½²æµç¨‹</a></li><li><a href=/posts/deployment/3007-linux-kubernetes/ title=Linuxéƒ¨ç½²Kubernetesæµç¨‹>Linuxéƒ¨ç½²Kubernetesæµç¨‹</a></li><li><a href=/posts/deployment/3008-linux-redis/ title=Redisé»˜è®¤é…ç½®æ–‡ä»¶ä¿®æ”¹>Redisé»˜è®¤é…ç½®æ–‡ä»¶ä¿®æ”¹</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/algorithm/>ç®—æ³•</a><ul><li><a href=/posts/algorithm/4001-algorithm-sort/ title=æ’åºç®—æ³•>æ’åºç®—æ³•</a></li><li><a href=/posts/algorithm/4002-algorithm-trie/ title=å‰ç¼€æ ‘>å‰ç¼€æ ‘</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/problems/>ç–‘éš¾æ‚ç—‡</a><ul><li><a href=/posts/problems/5001-go-online-service-oom/ title=è®°ä¸€æ¬¡çº¿ä¸Šçš„å†…å­˜æŒç»­å¢é•¿é—®é¢˜>è®°ä¸€æ¬¡çº¿ä¸Šçš„å†…å­˜æŒç»­å¢é•¿é—®é¢˜</a></li><li><a href=/posts/problems/5002-k8s-memory/ title=Grafanaä¸Šç›‘æ§ä¸å‡†é—®é¢˜æ’æŸ¥>Grafanaä¸Šç›‘æ§ä¸å‡†é—®é¢˜æ’æŸ¥</a></li><li><a href=/posts/problems/5003-elasticsearch-start-failed/ title=CentOSå®‰è£…å®ŒESæ— æ³•å¯åŠ¨>CentOSå®‰è£…å®ŒESæ— æ³•å¯åŠ¨</a></li><li><a href=/posts/problems/5004-kubernetes-dashboard-token/ title="k8s dashboard tokenè¿‡æœŸæ—¶é—´å¤ªçŸ­">k8s dashboard tokenè¿‡æœŸæ—¶é—´å¤ªçŸ­</a></li><li><a href=/posts/problems/5005-docker-image-source/ title=ä¿®æ”¹Dockeré•œåƒæº>ä¿®æ”¹Dockeré•œåƒæº</a></li><li><a href=/posts/problems/5006-mysql-brew-conf/ title=ä¿®æ”¹Macä¸Šbrewå®‰è£…çš„MySQLé…ç½®>ä¿®æ”¹Macä¸Šbrewå®‰è£…çš„MySQLé…ç½®</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/booknotes/>è¯»ä¹¦ç¬”è®°</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/booknotes/6001-ddia/>DDIA</a><ul><li><a href=/posts/booknotes/6001-ddia/001-ddia/ title=æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡(DDIA)è¯»ä¹¦ç¬”è®°>æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡(DDIA)è¯»ä¹¦ç¬”è®°</a></li><li><a href=/posts/booknotes/6001-ddia/002-ddia/ title=æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡(DDIA)è¯»ä¹¦ç¬”è®°>æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡(DDIA)è¯»ä¹¦ç¬”è®°</a></li><li><a href=/posts/booknotes/6001-ddia/003-ddia/ title=æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡(DDIA)è¯»ä¹¦ç¬”è®°>æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡(DDIA)è¯»ä¹¦ç¬”è®°</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/knowledge/2001-go/002-param-verify/head.svg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/avatar_hu6760e73bd186896e9f58f2b8b663dec5_93204_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name>Ormissia</h5><p>Tuesday, July 27, 2021</p></div><div class=title><h1>Golang å®ä½“å‚æ•°æ ¡éªŒ</h1></div><div class=post-content id=post-content><hr><p>#golang #reflect</p><hr><blockquote><p>Aï¼š&ldquo;è¯·ç”¨ä¸€å¥è¯è®©åˆ«äººçŸ¥é“ä½ å†™è¿‡Golangã€‚&rdquo;<br>Bï¼š&ldquo;if err!= nil &mldr;&rdquo;</p></blockquote><h2 id=èµ·å› >èµ·å› </h2><p>åªè¦æ˜¯æ¥è§¦è¿‡Golangçš„äººï¼Œæ— ä¸ä¸ºå…¶<code>if err != nil</code>çš„è¯­æ³•æ„Ÿåˆ°æƒŠå¥‡ï¼Œæˆ–æ˜¯å¤§åŠ èµèµï¼Œæˆ–æ˜¯ç‹ ç‹ ç—›æ‰¹ã€‚ä½œä¸ºä½¿ç”¨è€…ï¼Œä¸ç®¡å–œæ¬¢ä¹Ÿå¥½ï¼Œåå¯¹ä¹Ÿç½¢ï¼Œ
ç›®å‰è¿˜æ˜¯è¦æ¥å—è¿™ç§é”™è¯¯å¤„ç†æ¨¡å¼ã€‚</p><p>è€Œæœ€ä»¤äººå¤´ç—›çš„å°±æ˜¯è¯·æ±‚å‚æ•°ä¸­å„ç§å€¼çš„æ ¡éªŒã€‚æ¯”å¦‚<code>Get</code>è¯·æ±‚ä¸­æ¥æ”¶åˆ†é¡µå‚æ•°æ—¶ï¼Œéœ€è¦å°†<code>string</code>æ ¼å¼çš„å‚æ•°è½¬æ¢æˆ<code>int</code>ç±»å‹ï¼Œå†å¦‚æ—¶é—´ç±»å‹çš„å‚æ•° è½¬æ¢ï¼Œ
è¯¸å¦‚æ­¤ç±»ï¼Œç­‰ç­‰ç­‰ç­‰ã€‚å¥½å®¶ä¼™ï¼Œä¸€ä¸ªæ¥å£å†™å®Œ<code>if err != nil</code>çš„åˆ¤æ–­å äº†ä¸€å¤šåŠçš„è¡Œæ•°ï¼Œçœ‹ç€å®åœ¨ä¸çˆ½ã€‚</p><p>ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œè€Œä¸”è¿™ä¸ªæ¥å£å‚æ•°è¿˜ä¸æ˜¯ç‰¹åˆ«å¤š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Export</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//åˆ é™¤å¼€å¤´
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>param</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>ShouldBindJSON</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>param</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>vId</span>, <span style=color:#a6e22e>userId</span>, <span style=color:#a6e22e>userName</span>, <span style=color:#a6e22e>format</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>param</span>[<span style=color:#e6db74>&#34;vId&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>vId</span> = <span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>vId</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>param</span>[<span style=color:#e6db74>&#34;userId&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>userId</span> = <span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>param</span>[<span style=color:#e6db74>&#34;userName&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>userName</span> = <span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>param</span>[<span style=color:#e6db74>&#34;format&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>format</span> = <span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>IsOk</span>(<span style=color:#a6e22e>format</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ErrRsponse</span>(<span style=color:#a6e22e>c</span>,<span style=color:#a6e22e>errCode</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>    <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>//åˆ é™¤ç»“å°¾
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=æœºé‡>æœºé‡</h2><p>å‰å‡ å¤©åœ¨çœ‹<a href=https://github.com/flipped-aurora/gin-vue-admin target=_blank rel=noopener>GIN-VUE-ADMIN</a>ä»£ç çš„æ—¶å€™ï¼Œå¶ç„¶çœ‹åˆ°ä¸€ä¸ªé€šè¿‡åå°„å»åšå‚æ•°æ ¡éªŒçš„æ–¹å¼ã€‚
å˜¿ï¼Œå­¦åˆ°äº†ï¼</p><h2 id=æ”¹å˜>æ”¹å˜</h2><h3 id=å®šä¹‰è§„åˆ™>å®šä¹‰è§„åˆ™</h3><p>æ ¡éªŒè§„åˆ™ä½¿ç”¨ä¸€ä¸ª<code>map</code>å­˜å‚¨ï¼Œ<code>key</code>ä¸ºå­—æ®µåï¼Œ<code>value</code>ä¸ºè§„åˆ™åˆ—è¡¨ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ª<code>string</code>ç±»å‹çš„åˆ‡ç‰‡æ¥å­˜å‚¨ã€‚</p><blockquote><p>åç»­è®¡åˆ’åŠ å…¥<code>tag</code>æ ‡ç­¾å®šä¹‰è§„åˆ™çš„åŠŸèƒ½ä»¥åŠå¢åŠ é€šè¿‡å‡½æ•°å‚æ•°çš„æ–¹å¼ï¼Œå®ç°è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒ</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Rules</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>][]<span style=color:#66d9ef>string</span>
</span></span></code></pre></div><p>æ”¯æŒçš„è§„åˆ™æœ‰ï¼š</p><ul><li>ä¸ä¸ºç©º</li><li>ç­‰äºã€ä¸ç­‰äº</li><li>å¤§äºã€å°äº</li><li>å¤§äºç­‰äºã€å°äºç­‰äº</li></ul><blockquote><p>å¯¹äºæ•°å€¼ç±»å‹ä¸ºæ¯”è¾ƒå€¼å¤§å°ï¼Œå¯¹äºå­—ç¬¦ä¸²æˆ–è€…åˆ‡ç‰‡ç­‰ç±»å‹ä¸ºæ¯”è¾ƒé•¿åº¦å¤§å°</p></blockquote><p>æ¯”å¦‚è°ƒç”¨ç”Ÿæˆå°äºè§„åˆ™çš„æ–¹æ³•ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå°äºæŒ‡å®šå€¼è§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œç”¨äºåé¢æ ¡éªŒå™¨ä½¿ç”¨</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Lt &lt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>verifier</span> <span style=color:#a6e22e>verifier</span>) <span style=color:#a6e22e>Lt</span>(<span style=color:#a6e22e>limit</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%s%s%s&#34;</span>, <span style=color:#a6e22e>lt</span>, <span style=color:#a6e22e>verifier</span>.<span style=color:#a6e22e>separator</span>, <span style=color:#a6e22e>limit</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è§„åˆ™å®šä¹‰ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>UserRequestRules</span> = <span style=color:#a6e22e>go_opv</span>.<span style=color:#a6e22e>Rules</span>{
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;Name&#34;</span>: {<span style=color:#a6e22e>myVerifier</span>.<span style=color:#a6e22e>NotEmpty</span>(), <span style=color:#a6e22e>myVerifier</span>.<span style=color:#a6e22e>Lt</span>(<span style=color:#e6db74>&#34;10&#34;</span>)},
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;Age&#34;</span>:  {<span style=color:#a6e22e>myVerifier</span>.<span style=color:#a6e22e>Lt</span>(<span style=color:#e6db74>&#34;100&#34;</span>)},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#75715e>//map[Age:[lt#100] Name:[notEmpty lt#10]]
</span></span></span></code></pre></div><p>è§„åˆ™å«ä¹‰ä¸º<code>Age</code>å­—æ®µé•¿åº¦æˆ–å€¼å°äº100ï¼Œ<code>Name</code>å­—æ®µä¸ä¸ºç©ºä¸”é•¿åº¦æˆ–å€¼å°äº10ã€‚</p><h3 id=éªŒè¯å™¨>éªŒè¯å™¨</h3><p>å…ˆé€šè¿‡åå°„è·å–å¾…æ£€éªŒå‚æ•°çš„å€¼å’Œç±»å‹ï¼Œåˆ¤æ–­æ˜¯å¦ä¸º<code>struct</code>ï¼ˆç›®å‰åªå®ç°äº†å¯¹<code>struct</code>æ ¡éªŒçš„åŠŸèƒ½ï¼Œè®¡åˆ’åç»­åŠ å…¥å¯¹<code>map</code>çš„æ ¡éªŒåŠŸèƒ½ï¼‰ï¼Œ
è·å–<code>struct</code>å±æ€§æ•°é‡å¹¶éå†æ‰€æœ‰å±æ€§ï¼Œå¹¶éå†æ¯ä¸ªå­—æ®µä¸‹æ‰€æœ‰è§„åˆ™ï¼Œå¯¹å®šä¹‰çš„æ¯ä¸€ä¸ªè§„åˆ™è¿›è¡Œæ ¡éªŒæ˜¯å¦åˆæ ¼ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>verifier</span> <span style=color:#a6e22e>verifier</span>) <span style=color:#a6e22e>Verify</span>(<span style=color:#a6e22e>st</span> <span style=color:#66d9ef>interface</span>{}, <span style=color:#a6e22e>rules</span> <span style=color:#a6e22e>Rules</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>typ</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>TypeOf</span>(<span style=color:#a6e22e>st</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>val</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>ValueOf</span>(<span style=color:#a6e22e>st</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>val</span>.<span style=color:#a6e22e>Kind</span>() <span style=color:#f92672>!=</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Struct</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>New</span>(<span style=color:#e6db74>&#34;expect struct&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>num</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>val</span>.<span style=color:#a6e22e>NumField</span>()
</span></span><span style=display:flex><span>	<span style=color:#75715e>//éå†éœ€è¦éªŒè¯å¯¹è±¡çš„æ‰€æœ‰å­—æ®µ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#a6e22e>num</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>tagVal</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>typ</span>.<span style=color:#a6e22e>Field</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>val</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>val</span>.<span style=color:#a6e22e>Field</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>rules</span>[<span style=color:#a6e22e>tagVal</span>.<span style=color:#a6e22e>Name</span>]) &gt; <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>rules</span>[<span style=color:#a6e22e>tagVal</span>.<span style=color:#a6e22e>Name</span>] {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>v</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;notEmpty&#34;</span>:
</span></span><span style=display:flex><span>					<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>isEmpty</span>(<span style=color:#a6e22e>val</span>) {
</span></span><span style=display:flex><span>						<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>New</span>(<span style=color:#a6e22e>tagVal</span>.<span style=color:#a6e22e>Name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; value can not be nil&#34;</span>)
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>verifier</span>.<span style=color:#a6e22e>conditions</span>[<span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>verifier</span>.<span style=color:#a6e22e>separator</span>)[<span style=color:#ae81ff>0</span>]]:
</span></span><span style=display:flex><span>					<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>compareVerify</span>(<span style=color:#a6e22e>val</span>, <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>verifier</span>.<span style=color:#a6e22e>separator</span>) {
</span></span><span style=display:flex><span>						<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>New</span>(<span style=color:#a6e22e>tagVal</span>.<span style=color:#a6e22e>Name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; length or value is illegal,&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è§„åˆ™æ ¡éªŒæœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯åˆ¤ç©º å’Œæ¡ä»¶æ ¡éªŒã€‚<br>åˆ¤ç©ºæ˜¯é€šè¿‡åå°„<code>reflect.Value</code>è·å¾—å­—æ®µå€¼ï¼Œå¹¶é€šè¿‡åå°„<code>value.Kind()</code>è·å¾—å­—æ®µç±»å‹ã€‚
æœ€ç»ˆä½¿ç”¨<code>switch</code>åˆ†åˆ«å¯¹ä¸åŒç±»å‹ å­—æ®µè¿›è¡Œåˆ¤æ–­ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>isEmpty</span>(<span style=color:#a6e22e>value</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Value</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Kind</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>String</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Len</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Int</span>, <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Int8</span>, <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Int16</span>, <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Int32</span>, <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Int64</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Int</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>//æ­¤å¤„çœç•¥å…¶ä»–ç±»å‹åˆ¤æ–­
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>DeepEqual</span>(<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Interface</span>(), <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Zero</span>(<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Type</span>()).<span style=color:#a6e22e>Interface</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æ¡ä»¶æ ¡éªŒåˆ™æ˜¯é€šè¿‡å¼€å§‹æ—¶å®šä¹‰çš„èŒƒå›´æ¡ä»¶è¿›è¡Œæ ¡éªŒï¼Œä¼ å…¥åå°„<code>reflect.Value</code>è·å¾—å­—æ®µå€¼ï¼Œå®šä¹‰çš„è§„åˆ™ï¼Œä»¥åŠè§„åˆ™ä¸­çš„åˆ†éš”ç¬¦ã€‚å…ˆé€šè¿‡<code>switch</code>åˆ¤æ–­å…¶ç±»å‹ï¼Œ
å†é€šè¿‡<code>switch</code>åˆ¤æ–­æ¡ä»¶æ˜¯å¤§äºå°äºæˆ–æ˜¯å…¶ä»–æ¡ä»¶ï¼Œç„¶åè¿›è¡Œç›¸åº”åˆ¤æ–­ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>compareVerify</span>(<span style=color:#a6e22e>value</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Value</span>, <span style=color:#a6e22e>verifyStr</span>, <span style=color:#a6e22e>separator</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Kind</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>String</span>, <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Slice</span>, <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>Array</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>compare</span>(<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>Len</span>(), <span style=color:#a6e22e>verifyStr</span>, <span style=color:#a6e22e>separator</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>//æ­¤å¤„çœç•¥å…¶ä»–ç±»å‹åˆ¤æ–­
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=å°è£…>å°è£…</h3><p>ä¸ºäº†è°ƒç”¨æ–¹ä¾¿ï¼Œåšäº†ä¸€å±‚å°è£…ï¼Œä½¿ç”¨<a href=https://ormissia.github.io/posts/knowledge/2021-07-22/ target=_blank rel=noopener>å‡½æ•°é€‰é¡¹æ¨¡å¼</a>å¯¹æ ¡éªŒå™¨è¿›è¡Œå°è£…ï¼Œä½¿è°ƒç”¨æ›´ä¸ºæ–¹ä¾¿ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>defaultVerifierOptions</span> = <span style=color:#a6e22e>verifierOptions</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>separator</span>: <span style=color:#e6db74>&#34;:&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>conditions</span>: <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>bool</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>eq</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ne</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>gt</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>lt</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ge</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>le</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>VerifierOption</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>o</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>verifierOptions</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>verifierOptions</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>conditions</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>separator</span>  <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// SetSeparator Default separator is &#34;:&#34;.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>SetSeparator</span>(<span style=color:#a6e22e>seq</span> <span style=color:#66d9ef>string</span>) <span style=color:#a6e22e>VerifierOption</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>o</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>verifierOptions</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>o</span>.<span style=color:#a6e22e>separator</span> = <span style=color:#a6e22e>seq</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>SwitchEq</span>(<span style=color:#a6e22e>sw</span> <span style=color:#66d9ef>bool</span>) <span style=color:#a6e22e>VerifierOption</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>o</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>verifierOptions</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>o</span>.<span style=color:#a6e22e>conditions</span>[<span style=color:#a6e22e>eq</span>] = <span style=color:#a6e22e>sw</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e>//æ­¤å¤„çœç•¥å…¶ä»–å‚æ•°çš„è®¾ç½®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Verifier</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Verify</span>(<span style=color:#a6e22e>obj</span> <span style=color:#66d9ef>interface</span>{}, <span style=color:#a6e22e>rules</span> <span style=color:#a6e22e>Rules</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>NotEmpty</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Ne</span>(<span style=color:#a6e22e>limit</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Gt</span>(<span style=color:#a6e22e>limit</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Lt</span>(<span style=color:#a6e22e>limit</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Ge</span>(<span style=color:#a6e22e>limit</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Le</span>(<span style=color:#a6e22e>limit</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>verifier</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>separator</span>  <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>conditions</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>NewVerifier</span>(<span style=color:#a6e22e>opts</span> <span style=color:#f92672>...</span><span style=color:#a6e22e>VerifierOption</span>) <span style=color:#a6e22e>Verifier</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>options</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>defaultVerifierOptions</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>opt</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>opts</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>opt</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>options</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>verifier</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>separator</span>:  <span style=color:#a6e22e>options</span>.<span style=color:#a6e22e>separator</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>conditions</span>: <span style=color:#a6e22e>options</span>.<span style=color:#a6e22e>conditions</span>,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e>//æ­¤å¤„çœç•¥æ¥å£çš„å®ç°
</span></span></span></code></pre></div><h3 id=å‘å¸ƒ>å‘å¸ƒ</h3><blockquote><p>å¥½äº†ï¼ŒåŸºæœ¬åŠŸèƒ½å®Œæˆäº†ï¼Œå¦‚æœä»…ä»…æ˜¯æ”¾åœ¨æ¯ä¸ªé¡¹ç›®çš„<code>utils</code>æ‹·æ¥æ‹·å»ï¼Œæ˜¾ç„¶ååˆ†çš„ä¸ä¼˜é›…ã€‚<br>é‚£ä¹ˆè¿™å°±éœ€è¦å‘å¸ƒåˆ°<a href=https://pkg.go.dev target=_blank rel=noopener>pkg.go.dev</a>æ‰èƒ½é€šè¿‡<code>go get</code>å‘½ä»¤æ­£å¸¸è¢«å…¶ä»–é¡¹ç›®æ‰€å¼•ç”¨ã€‚</p></blockquote><ol><li>é¦–å…ˆæ˜¯<code>git commit</code>ã€<code>git push</code>ä¸€æŠŠæ¢­å°†é¡¹ç›®æ•´åˆ°<code>GitHub</code>ä¸Šã€‚</li><li>ç”±äº<a href=https://pkg.go.dev target=_blank rel=noopener>pkg.go.dev</a>çš„ç‰ˆæœ¬ç®¡ç†æœºåˆ¶éœ€è¦ç»™é¡¹ç›®æ‰“ä¸Š<code>tag</code>ï¼Œ<code>git tag v0.0.1</code>åŸºç¡€ç‰ˆæœ¬ï¼ŒğŸ˜‹å…ˆå®šä¸ª<code>0.0.1</code>å§ï¼Œ
ç„¶å<code>git push</code>å†èµ°ä¸€éã€‚</li><li>å½“ç„¶è¿™æ—¶å€™è¿˜æ²¡å®Œï¼Œéœ€è¦è‡ªå·±<code>go get</code>ä¸€ä¸‹ï¼ŒåŠ ä¸Š<code>GitHub</code>ä»“åº“åæ‰§è¡Œä¸€ä¸‹<code>go get github.com/ormissia/go-opv</code></li><li>è¿™æ ·ä»“åº“å°±å¯ä»¥æ­£å¸¸è¢«å¼•ç”¨äº†ã€‚è€Œä¸”ç”¨ä¸äº†å¤šä¹…ï¼Œå°±å¯ä»¥ä»<a href=https://pkg.go.dev target=_blank rel=noopener>pkg.go.dev</a>ä¸Šæœåˆ°ç›¸åº”çš„é¡¹ç›®äº†ã€‚</li><li>æœ€åè´´ä¸€ä¸‹æ¬¡é¡¹ç›®çš„è¿æ¥ï¼š<a href=https://pkg.go.dev/github.com/ormissia/go-opv target=_blank rel=noopener>go-opv</a></li></ol><blockquote><p>å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°è¿‡å°å‘ã€‚é¡¹ç›®ä¸­<code>go.mod</code>ä¸­çš„æ¨¡å—åéœ€è¦å†™<code>GitHub</code>çš„ä»“åº“åœ°å€ï¼Œå¯¹åº”æ­¤é¡¹ç›®å³ä¸º<code>module github.com/ormissia/go-opv</code>ã€‚
å¦‚æœé¡¹ç›®ç‰ˆæœ¬æœ‰æ›´æ–°ï¼Œæ‰“äº†æ–°çš„<code>tag</code>ä¹‹åã€‚å¯ä»¥é€šè¿‡<code>go get github.com/ormissia/go-opv@v0.0.3</code>æ‹‰å–æŒ‡å®šç‰ˆæœ¬ï¼Œç›®å‰å°šä¸æ¸…æ¥š
<a href=https://pkg.go.dev target=_blank rel=noopener>pkg.go.dev</a>æ˜¯å¦ä¼šè‡ªåŠ¨åŒæ­¥<code>GitHub</code>ä¸Šæœ€æ–°çš„<code>tag</code>ã€‚</p></blockquote><h2 id=æ£€éªŒ>æ£€éªŒ</h2><p>æµ‹è¯•ç”¨ä¾‹ï¼Ÿ<br>å¥½å§ï¼Œ<code>// TODO</code></p><blockquote><p>è€é“çœ‹åˆ°åº•äº†ï¼Œæ¥ä¸ªstarå§ğŸ˜<br>â†“â†“â†“â†“â†“â†“â†“â†“â†“<br><a href=https://github.com/ormissia/go-opv target=_blank rel=noopener>GitHubä»“åº“</a></p></blockquote></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>åˆ†äº«:</strong>
<a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2formissia.github.io%2fposts%2fknowledge%2f2001-go%2f002-param-verify%2f&title=Golang%20%e5%ae%9e%e4%bd%93%e5%8f%82%e6%95%b0%e6%a0%a1%e9%aa%8c" target=_blank><i class="fab fa-reddit"></i></a>
<a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2formissia.github.io%2fposts%2fknowledge%2f2001-go%2f002-param-verify%2f&title=Golang%20%e5%ae%9e%e4%bd%93%e5%8f%82%e6%95%b0%e6%a0%a1%e9%aa%8c" target=_blank><i class="fab fa-linkedin"></i></a>
<a class="btn btn-sm email-btn" href="mailto:?subject=Golang%20%e5%ae%9e%e4%bd%93%e5%8f%82%e6%95%b0%e6%a0%a1%e9%aa%8c&body=https%3a%2f%2formissia.github.io%2fposts%2fknowledge%2f2001-go%2f002-param-verify%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/ormissia/ormissia.github.io/edit/master/content/posts/knowledge/2001-go/002-param-verify/index.md title=æ”¹å–„æ­¤é¡µé¢ target=_blank rel=noopener><i class="fas fa-code-branch"></i>
æ”¹å–„æ­¤é¡µé¢</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/knowledge/2001-go/001-partten-1/ title="Go æƒ¯ç”¨æ¨¡å¼ï¼šå‡½æ•°é€‰é¡¹æ¨¡å¼" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> ä¸Šä¸€ç¯‡</div><div class=next-prev-text>Go æƒ¯ç”¨æ¨¡å¼ï¼šå‡½æ•°é€‰é¡¹æ¨¡å¼</div></a></div><div class="col-md-6 next-article"><a href=/posts/knowledge/2001-go/003-reflect/ title=Golangåå°„ class="btn btn-outline-info"><div>ä¸‹ä¸€ç¯‡ <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Golangåå°„</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>è”ç³»æ–¹å¼:</h5><ul><li><span>QQ:</span> <span>1432050813</span></li><li><a href=mailto:ormissia@outlook.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>ormissia@outlook.com</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>å…è´£å£°æ˜:</strong> è€é“çœ‹åˆ°åº•äº†ï¼Œè¦è´Ÿè´£çš„å“¦</p></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Â© 2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.2857361798c74cfe170430e1bf5db5fa9cb91200ab2592a81884808a1cddb285.js integrity="sha256-KFc2F5jHTP4XBDDhv121+py5EgCrJZKoGISAihzdsoU=" defer></script></body></html>