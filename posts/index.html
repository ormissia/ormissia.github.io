<!doctype html><html>
<head>
<title>Posts</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<link rel=stylesheet href=/css/bootstrap.min.css>
<link rel=stylesheet href=/css/layouts/main.css>
<link rel=stylesheet href=/css/navigators/navbar.css>
<link rel=stylesheet href=/css/plyr.css>
<link rel=stylesheet href=/css/flag-icon.min.css>
<link rel=stylesheet href=/css/katex.min.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css>
<link rel=icon type=image/png href=/images/favicon_hu8376fd15465fef26ffe66b6bcf0ca686_13669_42x0_resize_box_3.png>
<meta property="og:title" content="Posts">
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="https://ormissia.github.io/posts/">
<link rel=stylesheet href=/css/layouts/list.css>
<link rel=stylesheet href=/css/navigators/sidebar.css>
<link rel=stylesheet href=/css/style.css>
</head>
<body data-spy=scroll data-target=#TableOfContents data-offset=80>
<div class="container-fluid bg-dimmed wrapper">
<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
<div class=container>
<button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span>
</button>
<a class=navbar-brand href=/>
<img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png alt=Logo>
Ormissia's Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse lang-selector" id=top-nav-items>
<ul class="navbar-nav ml-auto">
</ul>
</div>
</div>
<img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo">
</nav>
<section class=sidebar-section id=sidebar-section>
<div class=sidebar-holder>
<div class=sidebar id=sidebar>
<form class=mx-auto method=get action=/search>
<input type=text name=keyword placeholder=Search data-search id=search-box>
</form>
<div class=sidebar-tree>
<ul class=tree id=tree>
<li id=list-heading><a href=/posts data-filter=all>博文</a></li>
<div class=subtree>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/knowledge/>知识积累</a>
<ul>
<li><a href=/posts/knowledge/2001-go-partten-1/ title=函数选项模式>函数选项模式</a></li>
<li><a href=/posts/knowledge/2002-go-param-verify/ title=实体参数校验>实体参数校验</a></li>
<li><a href=/posts/knowledge/2003-go-reflect/ title=Golang反射>Golang反射</a></li>
<li><a href=/posts/knowledge/2004-go-pprof/ title=pprof>pprof</a></li>
<li><a href=/posts/knowledge/2005-go-tag/ title="Golang struct tag">Golang struct tag</a></li>
<li><a href=/posts/knowledge/2006-hadoop-env/ title=Hadoop生态组件>Hadoop生态组件</a></li>
<li><a href=/posts/knowledge/2007-hadoop-hdfs/ title=HDFS基础知识>HDFS基础知识</a></li>
<li><a href=/posts/knowledge/2008-elasticstack-es/ title=Elasticsearch>Elasticsearch</a></li>
<li><a href=/posts/knowledge/2009-kubernetes-handless-statefullset/ title=k8s中通过Headless连接StatefulSet>k8s中通过Headless连接StatefulSet</a></li>
<li><a href=/posts/knowledge/2010-kubernetes-index/ title=Kubernetes文档索引>Kubernetes文档索引</a></li>
<li><a href=/posts/knowledge/2011-react-note/ title=React学习笔记>React学习笔记</a></li>
<li><a href=/posts/knowledge/2012-io-network/ title=网络IO演进历程>网络IO演进历程</a></li>
</ul>
</li>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/deployment/>环境部署</a>
<ul>
<li><a href=/posts/deployment/3001-blog-cicd/ title=我的博客后端Docker镜像打包自动部署流程>我的博客后端Docker镜像打包自动部署流程</a></li>
<li><a href=/posts/deployment/3002-linux-nginx/ title=Linux部署Nginx流程>Linux部署Nginx流程</a></li>
<li><a href=/posts/deployment/3003-linux-traefik/ title=Traefik部署流程>Traefik部署流程</a></li>
<li><a href=/posts/deployment/3004-linux-grafana/ title=Grafana部署流程>Grafana部署流程</a></li>
<li><a href=/posts/deployment/3005-linux-prometheus/ title=Prometheus部署流程>Prometheus部署流程</a></li>
<li><a href=/posts/deployment/3006-linux-elk/ title=ELK部署流程>ELK部署流程</a></li>
<li><a href=/posts/deployment/3007-linux-kubernetes/ title=Linux部署Kubernetes流程>Linux部署Kubernetes流程</a></li>
<li><a href=/posts/deployment/3008-linux-redis/ title=Redis默认配置文件修改>Redis默认配置文件修改</a></li>
</ul>
</li>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/algorithm/>算法</a>
<ul>
<li><a href=/posts/algorithm/4001-algorithm-sort/ title=排序算法>排序算法</a></li>
<li><a href=/posts/algorithm/4002-algorithm-trie/ title=前缀树>前缀树</a></li>
</ul>
</li>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/problems/>疑难杂症</a>
<ul>
<li><a href=/posts/problems/5001-go-online-service-oom/ title=记一次线上的内存持续增长问题>记一次线上的内存持续增长问题</a></li>
<li><a href=/posts/problems/5002-k8s-memory/ title=Grafana上监控不准问题排查>Grafana上监控不准问题排查</a></li>
<li><a href=/posts/problems/5003-elasticsearch-start-failed/ title=CentOS安装完ES无法启动>CentOS安装完ES无法启动</a></li>
<li><a href=/posts/problems/5004-kubernetes-dashboard-token/ title="k8s dashboard token过期时间太短">k8s dashboard token过期时间太短</a></li>
<li><a href=/posts/problems/5005-docker-image-source/ title=修改Docker镜像源>修改Docker镜像源</a></li>
<li><a href=/posts/problems/5006-mysql-brew-conf/ title=修改Mac上brew安装的MySQL配置>修改Mac上brew安装的MySQL配置</a></li>
</ul>
</li>
<li>
<i class="fas fa-plus-circle"></i><a href=/posts/unclassified/>未分类</a>
<ul>
<li><a href=/posts/unclassified/6001-markdown/ title="Markdown Sample">Markdown Sample</a></li>
</ul>
</li>
</div>
</ul>
</div>
</div>
</div>
</section>
<section class=content-section id=content-section>
<div class="content container-fluid" id=content>
<div class="container-fluid post-card-holder" id=post-card-holder>
<div class=post-card>
<a href=/posts/deployment/3008-linux-redis/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/deployment/3008-linux-redis/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Redis默认配置文件修改</h5>
<p class="card-text post-summary">与MySQL类似，Redis安装完也不能直接使用，默认的配置文件有几处需要修改
使用yum安装的Redis默认配置文件路径：/etc/redis.conf
允许访问地址 # bind 127.0.0.1 将只限本地访问的配置注释掉
修改保护模式 protected-mode no 将保护模式修改为no
启用守护进程 daemonize yes 将守护进程设置为yes</p>
</div>
<div class=card-footer>
<span class=float-left>January 13, 2022</span>
<a href=/posts/deployment/3008-linux-redis/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/knowledge/2012-io-network/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/knowledge/2012-io-network/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>网络IO演进历程</h5>
<p class="card-text post-summary">作为
网络IO演进模型 阻塞IO BIO(Blocking IO) 非阻塞IO NIO(Nonblocking IO) IO多路复用第一版 select/poll/epoll 异步IO AIO(Async IO) BIO 阻塞 IO，顾名思义当用户发生了系统调用后，如果数据未从网卡到达内核态，内核态数据未准备好，此时会一直阻塞。直到数据就绪，然后从内核态拷贝到用户态再返回。
BIO缺点，能支持的并发连接数比较少： 一台服务器能分配的线程数是有限的 大量线程频繁切换上下文会影响性能 核心矛盾：一个client分配一个线程是因为处理客户端读写是阻塞式的，为避免该阻塞影响接受后续新的client的连接，所以将阻塞逻辑交由单独的线程处理。
NIO 非阻塞 IO：见名知意，就是在第一阶段(网卡-内核态)数据未到达时不等待，然后直接返回。因此非阻塞 IO 需要不断的用户发起请求，轮询内核。
优点 将socket设为非阻塞后，在读取时如果数据未就绪就直接返回。可以通过一个线程管理多个client连接。 缺点 需要不断轮询内核，数据是否已经就绪，会造成很多无效的，太频繁的系统调用(system call)而造成资源浪费。 select/poll/epoll select 和 poll 的区别 select 能处理的最大连接，默认是 1024 个，可以通过修改配置来改变，但终究是有限个；而 poll 理论上可以支持无限个 select 和 poll 在管理海量的连接时，会频繁的从用户态拷贝到内核态，比较消耗资源 epoll对文件描述符的操作有两种模式： LT（level trigger）和 ET（edge trigger）。</p>
</div>
<div class=card-footer>
<span class=float-left>January 1, 2022</span>
<a href=/posts/knowledge/2012-io-network/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/knowledge/2011-react-note/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/knowledge/2011-react-note/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>React学习笔记</h5>
<p class="card-text post-summary">初始化React项目 npm install -g react npm install -g react-dom npm install -g react-scripts npm install -g create-react-app create-react-app hello-react cd hello-react npm start 更新package.json npm install -g npm-check-updates ncu # 或者npm-check-updates ncu -u to upgrade package.json npm install </p>
</div>
<div class=card-footer>
<span class=float-left>December 23, 2021</span>
<a href=/posts/knowledge/2011-react-note/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/problems/5006-mysql-brew-conf/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/problems/5006-mysql-brew-conf/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>修改Mac上brew安装的MySQL配置</h5>
<p class="card-text post-summary">一般MySQL 8.x安装完在select语句中使用group by时会报错，需要在my.cnf中配置设置sql_model参数。在Linux中，这个文件通常位于/etc目录下，而在Mac上，却不在这里。
在Mac本地安装的测试用的MySQL数据库，安装完成之后需要进行如下设置
设置sql_model 关闭ONLY_FULL_GROUP_BY模式
在sql命令行中查询sql_mode配置
select @@sql_mode; mysql> select @@sql_mode; +-----------------------------------------------------------------------------------------------------------------------+ | @@sql_mode | +-----------------------------------------------------------------------------------------------------------------------+ | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | +-----------------------------------------------------------------------------------------------------------------------+ 1 row in set (0.00 sec) 去掉第一项后得到：
STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION 使用mysql --help命令获取my.cnf配置文件所在位置
# ... Default options are read from the following files in the given order: /etc/my.cnf /etc/mysql/my.cnf /opt/homebrew/etc/my.cnf ~/.my.cnf The following groups are read: mysql client # ... 我安装的MySQL在/opt/homebrew/etc/my.cnf目录下，添加一行：
sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION 重启MySQL，问题解决
mysql.server restart 设置开机启动 cp /opt/homebrew/Cellar/mysql/8.0.27/homebrew.mxcl.mysql.plist ~/Library/LaunchAgents launchctl load -w ~/Library/LaunchAgents/homebrew.</p>
</div>
<div class=card-footer>
<span class=float-left>December 20, 2021</span>
<a href=/posts/problems/5006-mysql-brew-conf/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/knowledge/2010-kubernetes-index/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/knowledge/2010-kubernetes-index/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Kubernetes文档索引</h5>
<p class="card-text post-summary"> 为系统守护进程预留计算资源 开启服务拓扑 Master节点的高可用 Service 的 DNS </p>
</div>
<div class=card-footer>
<span class=float-left>November 4, 2021</span>
<a href=/posts/knowledge/2010-kubernetes-index/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/problems/5005-docker-image-source/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/problems/5005-docker-image-source/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>修改Docker镜像源</h5>
<p class="card-text post-summary">问题现象 国内某些网络环境下，会出现docker pull无法拉取镜像的情况
解决办法 修改Docker镜像源
新建或修改
vi /etc/docker/daemon.json { "registry-mirrors": [ "http://hub-mirror.c.163.com" ] } 最后重启Docker
systemctl restart docker.service </p>
</div>
<div class=card-footer>
<span class=float-left>November 4, 2021</span>
<a href=/posts/problems/5005-docker-image-source/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/knowledge/2009-kubernetes-handless-statefullset/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/knowledge/2009-kubernetes-handless-statefullset/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>k8s中通过Headless连接StatefulSet</h5>
<p class="card-text post-summary">连接一些多实例的服务（比如Kafka、ES）时，通常是在client端做负载均衡。
假如这种集群又恰好跑在k8s中，如果是普通业务类型的服务，通常是创建一个Service来做为一个代理去访问不同实例，从而达到负载均衡的目的。
但是诸如如：Kafka、ES类型的服务，还用Service来做负载均衡，显然就不那么合理了（诚然，Kafka、ES这种东西多半是不会跑在k8s上的，这里只是作为一个引子，不在本文讨论的范畴）。
实验环境 多实例服务whoami在kube-test-1的命名空间下 多实例服务whoami以StatefulSet方式部署，设置为3个实例，会自动创建whoami-0、whoami-1以及whoami-2三个Pod 给StatefulSet创建Headless类型的Service 模拟客户端使用Nginx镜像，部署在kube-test-2的命名空间下（使用curl命令模拟） 本实验创建资源使用的k8s dashboard，创建的资源默认放在选中的明明空间下，因此yml文件中未指定namespace。
Server cluster 服务端模拟相关资源在kube-test-1下创建
StatefulSet 使用traefik/whoami镜像来模拟服务端
这里使用StatefulSet的方式创建服务端。spec.replicas设为3，此时会自动创建whoami-0、whoami-1以及whoami-2三个Pod。
apiVersion: apps/v1 kind: StatefulSet metadata: name: whoami labels: app: whoami spec: replicas: 3 selector: matchLabels: app: whoami serviceName: whoami template: metadata: name: whoami labels: app: whoami spec: containers: - name: whoami image: traefik/whoami ports: - containerPort: 80 注意这里的spec.serviceName必须与下面的Service名字相同，否则调用时候pod的subdomain只能使用IP
$ k get pod -n kube-test-1 -o wide | grep whoami whoami-0 1/1 Running 0 29m 10.</p>
</div>
<div class=card-footer>
<span class=float-left>November 1, 2021</span>
<a href=/posts/knowledge/2009-kubernetes-handless-statefullset/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/problems/5004-kubernetes-dashboard-token/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/problems/5004-kubernetes-dashboard-token/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>k8s dashboard token过期时间太短</h5>
<p class="card-text post-summary">问题现象 kubernetes的dashboard登录token过期时间太短，不操作没一会就需要重新登录
解决办法 修改kubernetes-dashboard的deployment，加入一条arg参数：
- '--token-ttl=10800' </p>
</div>
<div class=card-footer>
<span class=float-left>November 1, 2021</span>
<a href=/posts/problems/5004-kubernetes-dashboard-token/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/knowledge/2008-elasticstack-es/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/knowledge/2008-elasticstack-es/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Elasticsearch</h5>
<p class="card-text post-summary">搜索类型 搜索引擎：百度、搜狗、谷歌、必应 垂直领域：各大电商平台、OA系统、站内搜索 商业智能：数据分析、数据挖掘、用户画像 GitHub：千亿+行代码秒查 日志系统：ELK ES特点 搜索、聚合分析、大数据存储 分布式、高性能、高可用、可伸缩、易维护 支持文本搜索、结构化数据、非结构化数据、地理位置搜索等 ES单机部署 同一节点启动不同服务 ./bin/elasticsearch -E path.data=data1 -E path.logs=log1 -E node.name=node1 -E cluster.name=ormissia_test ./bin/elasticsearch -E path.data=data2 -E path.logs=log2 -E node.name=node2 -E cluster.name=ormissia_test http://localhost:9200/ http://localhost:9201/ 不同节点启动同一服务 open ./elasticsearch_node1/bin/elasticsearch open ./elasticsearch_node2/bin/elasticsearch open ./elasticsearch_node3/bin/elasticsearch open ./elasticsearch_node4/bin/elasticsearch open ./elasticsearch_node5/bin/elasticsearch open ./kibana-7.15.1-darwin-x86_64/bin/kibana elasticsearch-head插件 GitHub Repository
git clone git://github.com/mobz/elasticsearch-head.git cd elasticsearch-head npm install npm run start 默认端口：9100
如果集群无法连接，需要修改ES配置文件
http.cors.enabled: true http.cors.allow-origin: "*" elasticsearch-head也可以以Chrome插件的方式安装</p>
</div>
<div class=card-footer>
<span class=float-left>October 19, 2021</span>
<a href=/posts/knowledge/2008-elasticstack-es/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/deployment/3007-linux-kubernetes/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/deployment/3007-linux-kubernetes/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>Linux部署Kubernetes流程</h5>
<p class="card-text post-summary">此次安装的平台是基于ARM架构的RedHat系Linux系统平台，参照Kubernetes官方文档进行的。
本文档流程与X86架构的没有区别，官方文档中个别步骤中的命令需要区分所使用的包对应的平台。
初始化环境 防火墙 systemctl stop firewalld.service systemctl disable firewalld.service SELinux vi /etc/selinux/config SELINUX=disabled Swap vi /etc/fstab 注释掉swap这一行
/.swapfile none swap sw,comment=cloudconfig 0 0 重启之后查看关闭是否成功
free -m 显示如下内容，swap关闭成功
total used free shared buff/cache available Mem: 23114 402 22299 32 411 20597 Swap: 0 0 0 ulimit echo "ulimit -n 65535" >> /etc/profile echo "* hard nofile 65535" >> /etc/security/limits.conf 重启之后检查是否配置成功
ulimit -n SSH免密（非必须） 执行命令，一路回车，即可获得当前节点的公钥
ssh-keygen -t rsa cat id_rsa.</p>
</div>
<div class=card-footer>
<span class=float-left>October 14, 2021</span>
<a href=/posts/deployment/3007-linux-kubernetes/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/problems/5003-elasticsearch-start-failed/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/problems/5003-elasticsearch-start-failed/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>CentOS安装完ES无法启动</h5>
<p class="card-text post-summary">问题现象 按照ES官网文档介绍的安装步骤，使用yum的方式进行安装。安装完成之后，使用如下命令启动：
systemctl start elasticsearch.service 控制台阻塞一会后，显示启动失败，使用如下命令查看状态：
systemctl status elasticsearch.service 查询状态为：
Warning: The unit file, source configuration file or drop-ins of elasticsearch.service changed on disk. Run 'systemctl daemon-reload' to reload units. ● elasticsearch.service - Elasticsearch Loaded: loaded (/usr/lib/systemd/system/elasticsearch.service; disabled; vendor preset: disabled) Active: failed (Result: timeout) since Thu 2021-10-14 00:42:40 CST; 2min 15s ago Docs: https://www.elastic.co Main PID: 2547 (code=exited, status=143) Oct 14 00:41:22 gateway systemd[1]: Starting Elasticsearch... Oct 14 00:41:29 gateway bash[2547]: [0.</p>
</div>
<div class=card-footer>
<span class=float-left>October 14, 2021</span>
<a href=/posts/problems/5003-elasticsearch-start-failed/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
<div class=post-card>
<a href=/posts/deployment/3006-linux-elk/ class=post-card-link>
<div class=card>
<div class=card-head>
<img class=card-img-top src=/posts/deployment/3006-linux-elk/head.svg alt="Hero Image">
</div>
<div class=card-body>
<h5 class=card-title>ELK部署流程</h5>
<p class="card-text post-summary">Elasticsearch Deployment&Service apiVersion: apps/v1 kind: StatefulSet metadata: labels: app: elasticsearch role: master name: elasticsearch-master spec: replicas: 3 revisionHistoryLimit: 10 selector: matchLabels: app: elasticsearch role: master serviceName: es-master template: metadata: labels: app: elasticsearch role: master spec: serviceAccountName: elasticsearch-admin affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: kubernetes.io/hostname labelSelector: matchExpressions: - key: role operator: In values: - master containers: - name: elasticsearch-master image: elasticsearch:7.14.2 lifecycle: postStart: exec: command: [ "/bin/bash", "-c", "sysctl -w vm.max_map_count=262144; ulimit -l unlimited; chown -R elasticsearch:elasticsearch /usr/share/elasticsearch/data;" ] ports: - containerPort: 9200 protocol: TCP - containerPort: 9300 protocol: TCP resources: limits: cpu: 100m memory: 1Gi requests: cpu: 10m memory: 512Mi env: - name: MY_POD_NAME valueFrom: fieldRef: fieldPath: metadata.</p>
</div>
<div class=card-footer>
<span class=float-left>October 13, 2021</span>
<a href=/posts/deployment/3006-linux-elk/ class="float-right btn btn-outline-info btn-sm">阅读</a>
</div>
</div>
</a>
</div>
</div>
<div class=paginator>
<ul class="pagination pagination-default">
<li class="page-item disabled">
<a href=# aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a>
</li>
<li class="page-item disabled">
<a href=# aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a>
</li>
<li class="page-item active">
<a href=# aria-current=page aria-label="Page 1" class=page-link role=button>1</a>
</li>
<li class=page-item>
<a href=/posts/page/2/ aria-label="Page 2" class=page-link role=button>2</a>
</li>
<li class=page-item>
<a href=/posts/page/3/ aria-label="Page 3" class=page-link role=button>3</a>
</li>
<li class=page-item>
<a href=/posts/page/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a>
</li>
<li class=page-item>
<a href=/posts/page/3/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a>
</li>
</ul>
</div>
</div>
</section>
</div>
<footer id=footer class="container-fluid text-center align-content-center footer pb-2">
<div class="container pt-5">
<div class="row text-left">
<div class="col-md-4 col-sm-12">
<h5>联系方式:</h5>
<ul>
<li><span>QQ: </span> <span>1432050813</span></li>
<li><a href=mailto:ormissia@outlook.com target=_blank rel=noopener>
<span><i class="fas fa-envelope"></i></span> <span>ormissia@outlook.com</span>
</a></li>
</ul>
</div>
</div>
</div>
<hr>
<div class=container>
<p id=disclaimer><strong>免责声明:</strong> 老铁看到底了，要负责的哦</p>
</div>
<hr>
<div class=container>
<div class="row text-left">
<div class=col-md-4>
<a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener>
<img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha
</a>
</div>
<div class="col-md-4 text-center">© 2021 Copyright.</div>
<div class="col-md-4 text-right">
<a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18>
</a>
</div>
</div>
</div>
</footer>
<script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script type=text/javascript defer src=/js/katex.min.js></script>
<script type=text/javascript defer src=/js/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script src=/js/list.js></script>
</body>
</html>