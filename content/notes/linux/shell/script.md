---
title: Script
weight: 713
menu:
  notes:
    name: Script
    identifier: notes-linux-shell-cript
    parent: notes-linux-shell
    weight: 713
---

<!-- Advance Command -->


{{< note title="脚本执行方式" >}}

1. 需要可执行权限
   - 相对路径执行
   - 绝对路径执行
2. 不需要可执行权限
   - `sh 脚本文件名`
   - `source 脚本文件名` // 不会启动子进程，通过`pstree`查看进程树

{{< /note >}}


{{< note title="定义变量" >}}

- 定义变量：`变量名=变量值`
- 取消变量：`unset 变量名`
- 注意事项：
  - `=`两边不能有空格
  - 不能使用关键字做变量名，如：`ls`、`cd`等
  - 如果变量名已存在，则会覆盖之前的变量值
  - 变量名称由字母、数字、下划线组成，不能以数字开头

{{< /note >}}


{{< note title="变量类型" >}}

- 环境变量：变量名通常大写，由操作系统维护
- 位置变量：shell内置变量，存储脚本执行时的参数
  - 使用`$n`表示，`n`为数字序列号：`$1`、`$2`、...、`${10}`、`${11}`、...
- 预定义变量：shell内置变量，可以直接调用但是不能赋值或修改'
  - `$0`：存储所在的进程或脚本名
  - `$$`：当前进程的`PID`号
  - `$?`：命令执行后的返回状态，0-正常，其他-异常
  - `$#`：已加载的位置变量的个数
  - `$*`：所有位置变量的值
- 自定义变量：用户自主设置

{{< /note >}}


{{< note title="多种引号的区别" >}}

- 双引号：允许扩展，以`$`引用其他变量
- 单引号：禁用扩展，将`$`视为普通字符
- 反引号：将命令执行的输出作为变量值，`$()`与反引号等效

{{< /note >}}


{{< note title="变量的作用范围" >}}

- 局部变量：新定义的变量默认只在当前Shell中有效，无法在子Shell环境中使用
- 全局变量：在当前Shell以及子Shell中均有效（`export a=1`：定义全局变量`a`）

{{< /note >}}


{{< note title="read标准输入取值" >}}

`read`从键盘读入变量值完成赋值
- 格式：`read [参数] [变量名]`
- 参数：
  - `-p`：提示信息
  - `-t`：指定超时秒数
  - `-s`：设置是否在终端显示输入的内容

{{< /note >}}
