<!doctype html><html lang=zh-cn><head><title>Script</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/application.45a5c976822bbb18695d6a4e0b0a54cc50b1e5934a15d3139ada0b1165781c4d.css integrity="sha256-RaXJdoIruxhpXWpOCwpUzFCx5ZNKFdMTmtoLEWV4HE0="><link rel=icon type=image/png href=/images/favicon_hu8376fd15465fef26ffe66b6bcf0ca686_13669_42x0_resize_box_3.png><meta property="og:title" content="Script"><meta property="og:description" content="脚本执行方式 需要可执行权限 相对路径执行 绝对路径执行 不需要可执行权限 sh 脚本文件名 source 脚本文件名 // 不会启动子进程，通过pstree查看进程树 定义变量 定义变量：变量名=变量值 取消变量：unset 变量名 注意事项： =两边不能有空格 不能使用关键字做变量名，如：ls、cd等 如果变量名已存在，则会覆盖之前的变量值 变量名称由字母、数字、下划线组成，不能以数字开头 变量类型 环境变量：变量名通常大写，由操作系统维护 位置变量：shell内置变量，存储脚本执行时的参数 使用$n表示，n为数字序列号：$1、$2、&mldr;、${10}、${11}、&mldr; 预定义变量：shell内置变量，可以直接调用但是不能赋值或修改' $0：存储所在的进程或脚本名 $$：当前进程的PID号 $?：命令执行后的返回状态，0-正常，其他-异常 $#：已加载的位置变量的个数 $*：所有位置变量的值 自定义变量：用户自主设置 多种引号的区别 双引号：允许扩展，以$引用其他变量 单引号：禁用扩展，将$视为普通字符 反引号：将命令执行的输出作为变量值，$()与反引号等效 变量的作用范围 局部变量：新定义的变量默认只在当前Shell中有效，无法在子Shell环境中使用 全局变量：在当前Shell以及子Shell中均有效（export a=1：定义全局变量a） read标准输入取值 read从键盘读入变量值完成赋值
格式：read [参数] [变量名] 参数： -p：提示信息 -t：指定超时秒数 -s：设置是否在终端显示输入的内容 变量作用范围 局部变量 新定义的变量默认只在当前Shell环境中有效，无法在子Shell环境中使用 全局变量 全局变量在当前Shell及子Shell中均有效，定义格式：export a=1 数学运算 整数运算
使用$[]或$(())表达式
格式：$[整数1 运算符 整数2]
小数运算
Bash内建机制仅支持整数运算，不支持小数运算 可以通过计算器软件bc实现小数计算
如果没有该软件需要使用yum安装 bc支持交互式和非交互式两种方式计算，scale=n可以约束小数位
bc也支持比较操作： >,>=,<,<=,==,!= 表达式成立返回1，否则返回0
字符串 字符串比较"><meta property="og:type" content="article"><meta property="og:url" content="https://ormissia.github.io/notes/linux/shell/script/"><meta property="article:section" content="notes"><meta name=twitter:card content="summary"><meta name=twitter:title content="Script"><meta name=twitter:description content="脚本执行方式 需要可执行权限 相对路径执行 绝对路径执行 不需要可执行权限 sh 脚本文件名 source 脚本文件名 // 不会启动子进程，通过pstree查看进程树 定义变量 定义变量：变量名=变量值 取消变量：unset 变量名 注意事项： =两边不能有空格 不能使用关键字做变量名，如：ls、cd等 如果变量名已存在，则会覆盖之前的变量值 变量名称由字母、数字、下划线组成，不能以数字开头 变量类型 环境变量：变量名通常大写，由操作系统维护 位置变量：shell内置变量，存储脚本执行时的参数 使用$n表示，n为数字序列号：$1、$2、&mldr;、${10}、${11}、&mldr; 预定义变量：shell内置变量，可以直接调用但是不能赋值或修改' $0：存储所在的进程或脚本名 $$：当前进程的PID号 $?：命令执行后的返回状态，0-正常，其他-异常 $#：已加载的位置变量的个数 $*：所有位置变量的值 自定义变量：用户自主设置 多种引号的区别 双引号：允许扩展，以$引用其他变量 单引号：禁用扩展，将$视为普通字符 反引号：将命令执行的输出作为变量值，$()与反引号等效 变量的作用范围 局部变量：新定义的变量默认只在当前Shell中有效，无法在子Shell环境中使用 全局变量：在当前Shell以及子Shell中均有效（export a=1：定义全局变量a） read标准输入取值 read从键盘读入变量值完成赋值
格式：read [参数] [变量名] 参数： -p：提示信息 -t：指定超时秒数 -s：设置是否在终端显示输入的内容 变量作用范围 局部变量 新定义的变量默认只在当前Shell环境中有效，无法在子Shell环境中使用 全局变量 全局变量在当前Shell及子Shell中均有效，定义格式：export a=1 数学运算 整数运算
使用$[]或$(())表达式
格式：$[整数1 运算符 整数2]
小数运算
Bash内建机制仅支持整数运算，不支持小数运算 可以通过计算器软件bc实现小数计算
如果没有该软件需要使用yum安装 bc支持交互式和非交互式两种方式计算，scale=n可以约束小数位
bc也支持比较操作： >,>=,<,<=,==,!= 表达式成立返回1，否则返回0
字符串 字符串比较"></head><body class="type-notes kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png alt=Logo>
Ormissia's Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/ormissia_hu763a76473558eea2a316ef50b45aaecf_966068_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=搜索 data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/notes data-filter=all>笔记</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/notes/go/>Go</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/go/basic/>Basics</a><ul><li><a href=/notes/go/basic/basic/ title=Basic>Basic</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/go/advance/>Advance</a><ul><li><a href=/notes/go/advance/time/ title=time>time</a></li><li><a href=/notes/go/advance/gomod/ title="go mod">go mod</a></li><li><a href=/notes/go/advance/chan/ title="go chan">go chan</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/go/algorithm/>Algorithm</a><ul><li><a href=/notes/go/algorithm/basic/ title=Basic>Basic</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/java/>Java</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/java/basic/>Basics</a><ul><li><a href=/notes/java/basic/basic_type/ title="Basic Types">Basic Types</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/scala/>Scala</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/scala/basic/>Basic</a><ul><li><a href=/notes/scala/basic/basic_type/ title="Basic Types">Basic Types</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/python/>Python</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/python/basic/>Basic</a><ul><li><a href=/notes/python/basic/basic/ title=Basic>Basic</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/js/>JavaScript</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/js/basic/>Basic</a><ul><li><a href=/notes/js/basic/basic/ title=Basic>Basic</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/sql/>SQL</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/sql/dml/>DML</a><ul><li><a href=/notes/sql/dml/dml/ title="SQL DML">SQL DML</a></li></ul></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/notes/linux/>Linux</a><ul class=active><li><i class="fas fa-minus-circle"></i><a class=active href=/notes/linux/shell/>Shell</a><ul class=active><li><a href=/notes/linux/shell/basic/ title=Basic>Basic</a></li><li><a href=/notes/linux/shell/advance/ title=Advance>Advance</a></li><li><a href=/notes/linux/shell/vi/ title=vi>vi</a></li><li><a class=active href=/notes/linux/shell/script/ title=Script>Script</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/linux/system/>System</a><ul><li><a href=/notes/linux/system/system/ title=Memory>Memory</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/hbase/>Hbase</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/hbase/shell/>Shell</a><ul><li><a href=/notes/hbase/shell/basic/ title=Basic>Basic</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/notes/kafka/>Kafka</a><ul><li><i class="fas fa-plus-circle"></i><a href=/notes/kafka/shell/>Shell</a><ul><li><a href=/notes/kafka/shell/basic/ title=Basic>Basic</a></li></ul></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid note-card-holder" id=note-card-holder><div class=note-card><div class=item><h5 class=note-title><span>脚本执行方式</span></h5><div class=card><div class=card-body><ol><li>需要可执行权限<ul><li>相对路径执行</li><li>绝对路径执行</li></ul></li><li>不需要可执行权限<ul><li><code>sh 脚本文件名</code></li><li><code>source 脚本文件名</code> // 不会启动子进程，通过<code>pstree</code>查看进程树</li></ul></li></ol></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>定义变量</span></h5><div class=card><div class=card-body><ul><li>定义变量：<code>变量名=变量值</code></li><li>取消变量：<code>unset 变量名</code></li><li>注意事项：<ul><li><code>=</code>两边不能有空格</li><li>不能使用关键字做变量名，如：<code>ls</code>、<code>cd</code>等</li><li>如果变量名已存在，则会覆盖之前的变量值</li><li>变量名称由字母、数字、下划线组成，不能以数字开头</li></ul></li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>变量类型</span></h5><div class=card><div class=card-body><ul><li>环境变量：变量名通常大写，由操作系统维护</li><li>位置变量：shell内置变量，存储脚本执行时的参数<ul><li>使用<code>$n</code>表示，<code>n</code>为数字序列号：<code>$1</code>、<code>$2</code>、&mldr;、<code>${10}</code>、<code>${11}</code>、&mldr;</li></ul></li><li>预定义变量：shell内置变量，可以直接调用但是不能赋值或修改'<ul><li><code>$0</code>：存储所在的进程或脚本名</li><li><code>$$</code>：当前进程的<code>PID</code>号</li><li><code>$?</code>：命令执行后的返回状态，0-正常，其他-异常</li><li><code>$#</code>：已加载的位置变量的个数</li><li><code>$*</code>：所有位置变量的值</li></ul></li><li>自定义变量：用户自主设置</li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>多种引号的区别</span></h5><div class=card><div class=card-body><ul><li>双引号：允许扩展，以<code>$</code>引用其他变量</li><li>单引号：禁用扩展，将<code>$</code>视为普通字符</li><li>反引号：将命令执行的输出作为变量值，<code>$()</code>与反引号等效</li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>变量的作用范围</span></h5><div class=card><div class=card-body><ul><li>局部变量：新定义的变量默认只在当前Shell中有效，无法在子Shell环境中使用</li><li>全局变量：在当前Shell以及子Shell中均有效（<code>export a=1</code>：定义全局变量<code>a</code>）</li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>read标准输入取值</span></h5><div class=card><div class=card-body><p><code>read</code>从键盘读入变量值完成赋值</p><ul><li>格式：<code>read [参数] [变量名]</code></li><li>参数：<ul><li><code>-p</code>：提示信息</li><li><code>-t</code>：指定超时秒数</li><li><code>-s</code>：设置是否在终端显示输入的内容</li></ul></li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>变量作用范围</span></h5><div class=card><div class=card-body><ul><li>局部变量<ul><li>新定义的变量默认只在当前Shell环境中有效，无法在子Shell环境中使用</li></ul></li><li>全局变量<ul><li>全局变量在当前Shell及子Shell中均有效，定义格式：<code>export a=1</code></li></ul></li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>数学运算</span></h5><div class=card><div class=card-body><p>整数运算</p><p>使用<code>$[]</code>或<code>$(())</code>表达式</p><p>格式：$[整数1 运算符 整数2]</p></div></div><div class=card><div class=card-body><p>小数运算</p><p>Bash内建机制仅支持整数运算，不支持小数运算
可以通过计算器软件<code>bc</code>实现小数计算</p><p>如果没有该软件需要使用<code>yum</code>安装
<code>bc</code>支持交互式和非交互式两种方式计算，<code>scale=n</code>可以约束小数位</p><p><code>bc</code>也支持比较操作：
<code>>,>=,&lt;,&lt;=,==,!=</code>
表达式成立返回<code>1</code>，否则返回<code>0</code></p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>字符串</span></h5><div class=card><div class=card-body><p>字符串比较</p><p><em>中括号与字符串之间和运算符与字符串之间均有有个空格</em><br>是否为空：<code>[ -z 字符串 ]</code><br>等于：<code>[ 字符串1 == 字符串2 ]</code><br>不等于：<code>[ 字符串1 ！= 字符串2 ]</code></p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>整数值比较</span></h5><div class=card><div class=card-body><p><code>[ 整数值1 操作符 整数值2 ]</code></p><p>-eq 等于（equal）
-ne 不等于（not equal）
-ge 大于等于（greater or equal）
-le 小于等于（less or equal）
-gt 大于（greater than）
-lt 小于（less than）</p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>文件状态测试</span></h5><div class=card><div class=card-body><p><code>[ 操作符 文件或目录 ]</code></p><p>-e 判断对象是否存在（exit）
-d 判断对象是否为目录（directory）
-f 判断对象是否为一般文件（file）
-r 判断对象是否有可读权限（read）
-w 判断对象是否有可写权限（write）
-x 判断对象是否有可执行权限（excute）</p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>组合多个命令</span></h5><div class=card><div class=card-body><code>;</code>：顺序执行
<code>||</code>：前面执行失败继续执行
<code>&&</code>：前面执行成功继续执行</div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>数组</span></h5><div class=card><div class=card-body><p>存储多个数据的集合</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>test<span style=color:#f92672>=(</span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> 3<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>${</span>test[0]<span style=color:#e6db74>}</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>函数</span></h5><div class=card><div class=card-body><p>语法格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>function</span> 函数名<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#命令序列</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>函数名<span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#命令序列</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><div class=card><div class=card-body><p>调用</p><p><code>函数名 参数1 参数2 ...</code>
传递的值作为函数的位置参数</p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>中断与退出</span></h5><div class=card><div class=card-body><code>continue</code>：结束单次循环
<code>break</code>：跳出循环体
<code>exit</code>：退出脚本</div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>子串截取</span></h5><div class=card><div class=card-body><p><code>${变量:起始位置:长度}</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ab<span style=color:#f92672>=</span><span style=color:#ae81ff>123456</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 统计ab长度</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>${#</span>ab<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 输出：6</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>${</span>ab:2:5<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 输出：3456</span>
</span></span></code></pre></div></div></div></div></div></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>联系方式:</h5><ul><li><span>QQ:</span> <span>1432050813</span></li><li><a href=mailto:ormissia@outlook.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>ormissia@outlook.com</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>免责声明:</strong> 老铁看到底了，要负责的哦</p></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.451c28e897463bba8139f7d5bc284a299c596a2be70cecc23e1d747a1ccd5ee9.js integrity="sha256-RRwo6JdGO7qBOffVvChKKZxZaivnDOzCPh10ehzNXuk=" defer></script></body></html>